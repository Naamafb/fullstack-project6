{"ast":null,"code":"var _jsxFileName = \"C:\\\\full stack\\\\react_api\\\\src\\\\Photos.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Photos() {\n  _s();\n  let {\n    userid\n  } = useParams();\n  let {\n    albumId\n  } = useParams();\n  const [photos, setPhotos] = useState([]);\n  const [findPhotos, setFindPhotos] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  const photosContainerRef = useRef(null);\n  useEffect(() => {\n    fetchPhotos();\n  }, [userid, handleScroll]);\n  const fetchPhotos = () => {\n    fetch(`https://jsonplaceholder.typicode.com/photos?albumId=${albumId}&_page=${page}&_limit=8`).then(response => {\n      const totalCount = response.headers.get('x-total-count');\n      setHasMore(totalCount > page * 8);\n      return response.json();\n    }).then(data => {\n      setPhotos(prevPhotos => [...prevPhotos, ...data]);\n      setIsLoading(false);\n    }).catch(() => setFindPhotos(false));\n  };\n  const handleScroll = () => {\n    const container = photosContainerRef.current;\n    const containerHeight = container.offsetHeight;\n    const scrollTop = container.scrollTop;\n    const scrollHeight = container.scrollHeight;\n    if (scrollHeight - scrollTop - containerHeight <= 10 && !isLoading && hasMore) {\n      setIsLoading(true);\n      setPage(prevPage => prevPage + 1);\n    }\n  };\n  useEffect(() => {\n    const container = photosContainerRef.current;\n    if (container) {\n      container.addEventListener('scroll', handleScroll);\n      return () => {\n        container.removeEventListener('scroll', handleScroll);\n      };\n    }\n  }, []);\n  useEffect(() => {\n    setPhotos([]);\n    setPage(1);\n    setHasMore(true);\n    fetchPhotos();\n  }, [albumId]);\n  if (findPhotos) {\n    let photosHtml = photos.map(photo => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: photo.title,\n        src: photo.thumbnailUrl,\n        style: {\n          maxWidth: '100%',\n          height: 'auto'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, photo.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: photosContainerRef,\n      style: {\n        height: '100vh',\n        overflowY: 'scroll'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          minHeight: '100%'\n        },\n        children: photosHtml\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading more photos...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"h2\", {\n    children: \"There are no photos\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 10\n  }, this);\n}\n_s(Photos, \"NkABPKGU6hgg9NVXehMRSs4UMhg=\", false, function () {\n  return [useParams, useParams];\n});\n_c = Photos;\nexport default Photos;\nvar _c;\n$RefreshReg$(_c, \"Photos\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","jsxDEV","_jsxDEV","Photos","_s","userid","albumId","photos","setPhotos","findPhotos","setFindPhotos","isLoading","setIsLoading","page","setPage","hasMore","setHasMore","photosContainerRef","fetchPhotos","handleScroll","fetch","then","response","totalCount","headers","get","json","data","prevPhotos","catch","container","current","containerHeight","offsetHeight","scrollTop","scrollHeight","prevPage","addEventListener","removeEventListener","photosHtml","map","photo","style","margin","children","alt","title","src","thumbnailUrl","maxWidth","height","fileName","_jsxFileName","lineNumber","columnNumber","id","ref","overflowY","minHeight","_c","$RefreshReg$"],"sources":["C:/full stack/react_api/src/Photos.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport {  useParams } from 'react-router-dom';\r\n\r\nfunction Photos() {\r\n  let {userid}=useParams();\r\n\r\n  let { albumId } = useParams();\r\n  const [photos, setPhotos] = useState([]);\r\n  const [findPhotos, setFindPhotos] = useState(true);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [page, setPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const photosContainerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    fetchPhotos();\r\n  },[userid, handleScroll]);\r\n\r\n  const fetchPhotos = () => {\r\n    fetch(`https://jsonplaceholder.typicode.com/photos?albumId=${albumId}&_page=${page}&_limit=8`)\r\n      .then((response) => {\r\n        const totalCount = response.headers.get('x-total-count');\r\n        setHasMore(totalCount > page * 8);\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        setPhotos((prevPhotos) => [...prevPhotos, ...data]);\r\n        setIsLoading(false);\r\n      })\r\n      .catch(() => setFindPhotos(false));\r\n  };\r\n\r\n  const handleScroll = () => {\r\n    const container = photosContainerRef.current;\r\n    const containerHeight = container.offsetHeight;\r\n    const scrollTop = container.scrollTop;\r\n    const scrollHeight = container.scrollHeight;\r\n\r\n    if (scrollHeight - scrollTop - containerHeight <= 10 && !isLoading && hasMore) {\r\n      setIsLoading(true);\r\n      setPage((prevPage) => prevPage + 1);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const container = photosContainerRef.current;\r\n    if (container) {\r\n      container.addEventListener('scroll', handleScroll);\r\n\r\n      return () => {\r\n        container.removeEventListener('scroll', handleScroll);\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setPhotos([]);\r\n    setPage(1);\r\n    setHasMore(true);\r\n    fetchPhotos();\r\n  }, [albumId]);\r\n\r\n  if (findPhotos) {\r\n    let photosHtml = photos.map((photo) => (\r\n      <div key={photo.id} style={{ margin: '10px' }}>\r\n        <img alt={photo.title} src={photo.thumbnailUrl} style={{ maxWidth: '100%', height: 'auto' }} />\r\n      </div>\r\n    ));\r\n\r\n    return (\r\n      <div ref={photosContainerRef} style={{ height: '100vh', overflowY: 'scroll' }}>\r\n        <div style={{ minHeight: '100%' }}>\r\n          {photosHtml}\r\n        </div>\r\n        {isLoading && <div>Loading more photos...</div>}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <h2>There are no photos</h2>;\r\n}\r\n\r\nexport default Photos;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}